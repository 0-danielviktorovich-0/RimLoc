---
title: CLI команды
---

# Обзор CLI-команд

RimLoc CLI объединяет инструменты для сбора, проверки и обмена переводами RimWorld. Команды выводят единообразные сообщения и коды возврата, поэтому их легко скриптовать и запускать в CI.

## Перед началом

- Установите CLI: `cargo install rimloc-cli`.
- Работайте с чистой копией мода — команды читают и пишут внутри `Languages/`.
- Потренируйтесь на фикстуре `test/TestMod`, прежде чем запускать команды на реальных данных.

## Типовой рабочий цикл

1. **Scan** — извлекает строки из мода.
2. **Validate** — ловит дубликаты, пустоты и несоответствия плейсхолдеров.
3. **Export PO/CSV** — готовит пакет для переводчиков или CAT-инструментов.
4. **Validate PO** — сверяет плейсхолдеры в переведённых PO-файлах.
5. **Import PO** — возвращает переводы в XML и позволяет снова прогнать `validate` перед релизом.

## Сводная таблица

| Команда | Назначение | Частые опции |
|---------|------------|--------------|
| [`scan`](scan.md) | Собирает единицы перевода из XML. | `--lang`, `--format`, `--out-csv` |
| [`validate`](validate.md) | Проверяет XML на дубликаты, пустоты и плейсхолдеры. | `--format`, `--ui-lang` |
| [`validate-po`](validate_po.md) | Сравнивает плейсхолдеры в PO-файлах. | `--po`, `--strict`, `--format` |
| [`export-po`](export_import.md#export-po) | Формирует пакеты PO/CSV для переводчиков. | `--out`, `--single-po`, `--dry-run` |
| [`import-po`](export_import.md#import-po) | Применяет изменения из PO к XML. | `--po`, `--out`, `--dry-run` |

## Полезные паттерны

```bash
# Запустить проверку в CI и упасть только при ошибках
rimloc-cli validate --root ./path/to/mod --format text

# Получить машинно-читаемую диагностику
rimloc-cli validate --root ./path/to/mod --format json | jq '.[] | select(.level=="error")'

# Экспортировать и тут же проверить плейсхолдеры в PO
rimloc-cli export-po --root ./path/to/mod --single-po --out ./out/mymod.po
rimloc-cli validate-po --po ./out/mymod.po --strict
```

## Решение проблем

- **В примерах появляются префиксы `/RimLoc/`** — очистите `SITE_URL` локально; задавайте его только в CI перед `mkdocs build`.
- **Сообщения `placeholder-check`** — сравните плейсхолдеры в исходных и переведённых строках; флаг `--format json` подсветит проблемный ключ.
- **Экспорт/импорт ничего не делает** — убедитесь, что каталог `Languages/<lang>/` существует и код языка совпадает с переданным флагом.

Нужны детали по конкретной команде? На отдельных страницах приведены таблицы опций, примеры и советы по устранению ошибок.
